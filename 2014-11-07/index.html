<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>The Dart side of the moon, la face cachée du cloud</title>

    <meta name="description" content="Presentation for Nantes DevFest">
    <meta name="keywords" content="dart, dartlang, polymer, WebComponent, Google Cloud, Managed VM, datastore">
    <meta name="author" content="Dartlangfr">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link href='http://fonts.googleapis.com/css?family=Asset|Lobster|Monofett|Press+Start+2P' rel='stylesheet' type='text/css'>
    
		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/beige.css" id="theme">

    <link rel="shortcut icon" href="favicon.png">

     <!--  For syntax highlighting from dartlang.org -->
    <link rel="stylesheet" href="lib/css/dartlang.css">
    <link rel="stylesheet" href="lib/css/dart-style.css">
    <script src="lib/js/dartlang.js"></script>

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

    <link rel="stylesheet" href="css/slides.css">
    
    <!-- Importing Web Component's Polyfill -->
    <script src="bower_components/platform/platform.js"></script>

    <link rel="import" href="elements.html">
    
		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
        <section id="sponsors" data-background="img/sponsors.png">
          
          <aside class="notes">
            <ul>
              <li>Bonjour et bienvenue</li>
              <li>Merci aux sponsors</li>
            </ul>
          </aside>
        </section>

				<section id="intro">
          <!-- TODO svg image for gcloud logo -->
          <h1><img alt="gcloud" src="img/gcloud.png" style="height: 1em;"> + <img alt="Dart" src="img/dart.svg" style="height: 1.1em;"></h1>

          <h1>The Dart side of the moon</h1>

          <h2>La face cachée du cloud</h2>

          <p>
              <small><a href="https://google.com/+NicolasFrancois">+NicolasFrancois</a> / <a href="https://twitter.com/nicofrancois">@nicofrancois</a></small>
              <br>
              <small><a href="https://google.com/+GuillaumeGirou">+GuillaumeGirou</a> / <a href="https://twitter.com/GirouGuillaume">@GirouGuillaume</a></small>
          </p>
          <aside class="notes">
              <ul>
                  <li>Intro sujet</li>
                  <li>Guillaume, développeur chez Sfeir / Ambassadeur Dart</li>
                  <li>Nicolas, ...</li>
              </ul>
          </aside>
         </section>


         <section id="cloud-platform">
           <h1>Google Platform for Dart</h1>

         </section>


          <section>
            <section id="compute engine">
              <h1><img alt="compute engine" src="img/compute-logo.png"></h1>
              <h1>Compute Engine</h1>
            </section>

            <section id="hello-from-server">
              <h1>Hello from classic server</h1>
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>import 'dart:io';

void main() {
  HttpServer.bind(InternetAddress.LOOPBACK_IP_V4, 8080).then((server) {
    server.listen((HttpRequest request) {
      print("Server started...")
      request.response
       ..write("Hello world")
       ..close();
    });
  });
}
</pre>
            </section>

            <section id="create-gce-instance">
              <h2>Create instance</h2>
              <ul>
                 <li>Instance name</li>
                 <li>Operating System</li>
                 <li>Machine type</li>
                 <li>Zone</li>
                 <li>Firewall rules</li>
              </ul> 
<pre class="programlisting">
<em><span class="remark">lang-sh</span></em>gcloud compute instances create "dart-demo" \
          --machine-type "f1-micro" \
          --image "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-7-wheezy-v20141021" \
          --zone "europe-west1-b" 

 gcloud compute firewall-rules create $VM_NAME-server \
          --allow tcp:8080         
</pre>
<pre class="programlisting">
<em><span class="remark">lang-sh</span></em>gcloud compute ssh "dart-demo" --zone "europe-west1-b" 
</pre>
            </section>

            <section id="gce-deployment">
              <h2>Deployment</h2>
              <ul>
                <li>Update debian repositories for Dart</li>
                <li>Install Dart and git</li>
                <li>Clone project</li>
                <li>Run it</li> 
              </ul>
<pre class="programlisting">
<em><span class="remark">lang-sh</span></em># Update repository
sudo apt-get update
sudo apt-get install apt-transport-https -y
sudo sh -c 'curl https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -'
sudo sh -c 'curl https://storage.googleapis.com/download.dartlang.org/linux/debian/dart_stable.list > /etc/apt/sources.list.d/dart_stable.list'
sudo apt-get update

# Install dart and git
sudo apt-get install dart
sudo apt-get install git -y

# Clone and start appp
git clone https://github.com/nfrancois/dart-hello
cd dart-hello
dart bin/server.dart &
</pre>

            </section>

         </section>

         <section>
            <section  id="managed-vm">
             <h1><img alt="managed-vm" src="img/appengine-logo.png"></h1>
             <h1>Managed VMs</h1>
           </section>

           <section id="cloud-services">
            <h1>Initial services</h1>
            <ul>
              <li>Users</li>
              <li>Logging</li>
              <li>Mem cache</li>
            </ul>
         </section> 

            <section id="hello-from-appengine">
              <h1>Hello from appengine</h1>            
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>import 'package:appengine/appengine.dart';

void main(){
  runAppEngine((requestHander) {
    context.services.logging.info("AppEngine started...");
    requestHander.response
      ..write("Hello world")
      ..close();
  });
}
</pre>
            </section>
           
         </section>   
         
         <section>
           <section id="cloud-datastore">
              <h1><img alt="cloud-datastore" src="img/datastore-logo.png"></h1>
              <h1>Cloud datastore</h1>
          </section>

          <section id="non-relational">
            <h2>Store non relationnal data</h2>
             <ul>
                <li>Fully managed, schemaless database</li>
                <li>Dart mapping layer</li>
                <li>Dart Low level API</li>
              </ul>
           </section>

           <section id="modelize-data">
            <h1>Modelize data</h1>
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>@Kind()
class Person extends Model {
  @StringProperty(required: true)
  String name;

  @IntProperty()
  int age;

  @DateTimeProperty()
  DateTime dateOfBirth;
}
</pre>
           </section>

           <section id="store-data">
            <h1>Store data</h1>
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>final john = new Person()..name = 'John Doe';
final jane = new Person()..name = 'Jane Doe';
final List&lt;Person&gt; persons  = [john, jane];

final List&lt;Entity&gt; entities = persons.map(datastoreDb.modelDB.toDatastoreEntity);

datastoreDb.datastore.commit(inserts: entities).then((_){
  print('Data inserted');
});
</pre>
           </section>

           <section id="query-data">
            <h1>Query data</h1>
Adresses from a person
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>final findQuery = new Query(ancestorKey: entities.first.key, kind: 'Adress');
datastoreDb.datastore.query(findQuery).then((Page&lt;Entity&gt; page){
    print('Found ${page.items.length} items');
});
</pre>
           </section>
         </section>

        <section>
           <section id="cloud-storage">
             <h1><img alt="cloud-storage" src="img/storage-logo.png"></h1>
             <h1>Cloud storage</h1>
           </section>

           <section id="concept">
             <h2>Concept</h2> 
             <ul>
              <li>Service to store data in Google's cloud.</li>
              <li>High Capacity and Scalability.</li>
              <li>Strong Data Consistency.</li>
             </ul>
           </section>

           <section id="terminology">
             <h2>Terminology</h2> 
             <ul>
              <li>Buckets are the basic containers that hold your data.</li>
              <li>Objects are the individual pieces of data that you store.</li>
             </ul>
            </section>

            <section id="access">
              <h2>Access</h2>
              <div>g://&lt;bucket&gt;/&lt;object&gt;</div>
              <div> g://images/user_123.png</div>
           </section>

           <section id="storage-storage">
             <h1>List and create buckets</h1>
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>storage.listBucketNames().listen(print);</pre>
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>storage.bucketExists(bucketName).then((exist){
  if(!exist) {
    storage.createBucket(bucketName).then((Bucket bucket) {
      print('bucket ${bucket.bucketName} is created');
    });
  }
});
</pre> 
           </section>

          <section id="storage-bucket">
            <h1>Read and write in documents</h1>
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>final bucket = storage.bucket(bucketName);</pre> 
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>bucket.read(docName).listen(print);</pre>
<pre class="programlisting">
<em><span class="remark">lang-dart</span></em>bucket.writeBytes(docName, "Hello World".codeUnits).then((ObjectInfo info){
  print('${info.name} created.');
});
</pre>    
           </section>

         </section>  

         <section>
           <section id="polymer">
             <h1><img alt="Polymer" src="img/polymer.svg" style="height: 1em;"></h1>
             <h1>Polymer</h1>
           </section>

           <section id="web-components">
             <h2><img alt="web components" src="img/webcomponents.svg" style="height: 1em;"></h2>
             <h2>Web components</h2>
           </section>

           <section id="core-elements">
             <h2>Core elements</h2>
           </section>

           <section id="paper-elements">
             <h2>Paper elements</h2>
           </section>

         </section>

         <section>
            <section id="chrome-dev-editor">
              <h1><img alt="chrome-dev-editor" src="img/chrome-dev-editor.png" style="height: 1em;"></h1>
              <h1>Chrome Dev Editor</h1>
           </section>
         </section>

  			 <section id="thanks">
  			   <h1 style="text-transform: none;">&lt;thank-you&gt;</h1>
            <small>dartlangfr.net/conferences/2014-10-28/</small>
  				 <h3>
             BY <a href="https://google.com/+NicolasFrancois">+NicolasFrancois</a> / <a href="https://twitter.com/nicofrancois">@nicofrancois</a>
             <br>
  					AND <a href="https://google.com/+GuillaumeGirou">+GuillaumeGirou</a> / <a href="https://twitter.com/GirouGuillaume">@GirouGuillaume</a>
  				 </h3>
  				 <h3>
              <img alt="Dart" src="img/dartlangfr.svg" style="height: 1em; margin: 0;"> <a href="http://gplus.to/dartlangfr">gplus.to/dartlangfr</a>
  				 </h3>
  			</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
    
        //keyboard: false,
				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});
      
      /*Reveal.configure({
        keyboard: {
          13: 'next', // go to the next slide when the ENTER key is pressed
          27: function() {}, // do something custom when ESC is pressed
          32: null // don't do anything when SPACE is pressed (i.e. disable a reveal.js default binding)
        }
      });*/

		</script>

	</body>
</html>
